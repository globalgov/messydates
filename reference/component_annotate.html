<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Annotates dates as censored, uncertain, or approximate — component_annotate • messydates</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Annotates dates as censored, uncertain, or approximate — component_annotate"><meta name="description" content='Some datasets have for example an arbitrary cut off point
for start and end points, but these are often coded as precise dates
when they are not necessarily the real start or end dates.
This collection of functions helps annotate uncertainty and
approximation to dates according to ISO2019E standards.
Inaccurate start or end dates can be represented by an affix
indicating "on or before", if used as a prefix (e.g. ..1816-01-01),
or indicating "on or after", if used as a suffix (e.g. 2016-12-31..).
Approximate dates are indicated by adding a tilde to year,
month, or day components, as well as groups of components or whole dates
to estimate values that are possibly correct (e.g. 2003-03-03~).
Day, month, or year, uncertainty can be indicated by adding a question mark
to a possibly dubious date (e.g. 1916-10-10?) or date
component (e.g. 1916-?10-10).'><meta property="og:description" content='Some datasets have for example an arbitrary cut off point
for start and end points, but these are often coded as precise dates
when they are not necessarily the real start or end dates.
This collection of functions helps annotate uncertainty and
approximation to dates according to ISO2019E standards.
Inaccurate start or end dates can be represented by an affix
indicating "on or before", if used as a prefix (e.g. ..1816-01-01),
or indicating "on or after", if used as a suffix (e.g. 2016-12-31..).
Approximate dates are indicated by adding a tilde to year,
month, or day components, as well as groups of components or whole dates
to estimate values that are possibly correct (e.g. 2003-03-03~).
Day, month, or year, uncertainty can be indicated by adding a question mark
to a possibly dubious date (e.g. 1916-10-10?) or date
component (e.g. 1916-?10-10).'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">messydates</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.5.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Take me home"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/globalgov/messydates" aria-label="Take me to the Github repository"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Annotates dates as censored, uncertain, or approximate</h1>
      <small class="dont-index">Source: <a href="https://github.com/globalgov/messydates/blob/main/R/component_annotate.R" class="external-link"><code>R/component_annotate.R</code></a></small>
      <div class="d-none name"><code>component_annotate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Some datasets have for example an arbitrary cut off point
for start and end points, but these are often coded as precise dates
when they are not necessarily the real start or end dates.
This collection of functions helps annotate uncertainty and
approximation to dates according to ISO2019E standards.
Inaccurate start or end dates can be represented by an affix
indicating "on or before", if used as a prefix (e.g. <code>..1816-01-01</code>),
or indicating "on or after", if used as a suffix (e.g. <code>2016-12-31..</code>).
Approximate dates are indicated by adding a tilde to year,
month, or day components, as well as groups of components or whole dates
to estimate values that are possibly correct (e.g. <code>2003-03-03~</code>).
Day, month, or year, uncertainty can be indicated by adding a question mark
to a possibly dubious date (e.g. <code>1916-10-10?</code>) or date
component (e.g. <code>1916-?10-10</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">on_or_before</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">on_or_after</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_approximate</span><span class="op">(</span><span class="va">x</span>, component <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_uncertain</span><span class="op">(</span><span class="va">x</span>, component <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A date vector</p></dd>


<dt id="arg-component">component<a class="anchor" aria-label="anchor" href="#arg-component"></a></dt>
<dd><p>Annotation can be added on specific date components
("year", "month" or "day"), or to groups of date components (month and
day ("md"), or year and month ("ym")). This must be specified.
If unspecified, annotation will be added after the date (e.g. <code>1916-10-10?</code>),
indicating the whole date is uncertain or approximate.
For specific date components, uncertainty or approximation is annotated to
the left of the date component.
E.g. for "day": <code>1916-10-?10</code> or <code>1916-10-~10</code>.
For groups of date components, uncertainty or approximation is annotated to
the right of the group ("ym") or to both components ("md").
E.g. for "ym": <code>1916-10~-10</code>; for "md": <code>1916-?10-?10</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>mdate</code> object with annotated date(s)</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>on_or_before()</code>: prefixes dates with ".." where start date is uncertain</p></li>
<li><p><code>on_or_after()</code>: suffixes dates with ".." where end date is uncertain</p></li>
<li><p><code>as_approximate()</code>: adds tildes to indicate approximate dates/date components</p></li>
<li><p><code>as_uncertain()</code>: adds question marks to indicate dubious dates/date components.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Beg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1816-01-01"</span>, <span class="st">"1916-01-01"</span>, <span class="st">"2016-01-01"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  End <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1816-12-31"</span>, <span class="st">"1916-12-31"</span>, <span class="st">"2016-12-31"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">data</span>, Beg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Beg</span> <span class="op">&lt;=</span> <span class="st">"1816-01-01"</span>,</span></span>
<span class="r-in"><span>  <span class="fu">on_or_before</span><span class="op">(</span><span class="va">Beg</span><span class="op">)</span>, <span class="va">Beg</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Beg        End</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 ..1816-01-01 1816-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1916-01-01 1916-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   2016-01-01 2016-12-31</span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">data</span>, End <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">End</span> <span class="op">&gt;=</span> <span class="st">"2016-01-01"</span>,</span></span>
<span class="r-in"><span>  <span class="fu">on_or_after</span><span class="op">(</span><span class="va">End</span><span class="op">)</span>, <span class="va">End</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Beg          End</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1816-01-01   1816-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1916-01-01   1916-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2016-01-01 2016-12-31..</span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">data</span>, Beg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Beg</span> <span class="op">==</span> <span class="st">"1916-01-01"</span>,</span></span>
<span class="r-in"><span>  <span class="fu">as_approximate</span><span class="op">(</span><span class="va">Beg</span><span class="op">)</span>, <span class="va">Beg</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Beg        End</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1816-01-01 1816-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1916-01-01~ 1916-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  2016-01-01 2016-12-31</span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">data</span>, End <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">End</span> <span class="op">==</span> <span class="st">"1916-12-31"</span>,</span></span>
<span class="r-in"><span>  <span class="fu">as_uncertain</span><span class="op">(</span><span class="va">End</span><span class="op">)</span>, <span class="va">End</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Beg         End</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1816-01-01  1816-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1916-01-01 1916-12-31?</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2016-01-01  2016-12-31</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://jameshollway.com" class="external-link">James Hollway</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

